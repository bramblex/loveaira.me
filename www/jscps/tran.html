
<html>
  <head> 
    <title>JavaScript的CPS变换</title>
    <meta http-equiv="Content-Type" content="text/html"; charset="utf-8" />
  </head> 

  <body>
    <h1>JavaScript的CPS变换</h1>
    <p>
      输入：
    </p>
    <p>
      <textarea id="input" style="width: 60%; height: 15em;"></textarea>
    </p>
    <p>
      输出：
    </p>
    <p>
      <textarea id="output" style="width: 60%; height: 15em;"></textarea>
    </p>
    <p>
      <button id="tran">CPS变换</button>
      <button id="run">执行测试</button>
    </p>
    <script src="./Class.js"></script>
    <script src="./esprima.js"></script>
    <script src="./cps.js"></script>
    <script src="./estraverse.js"></script>
    <script src="./escodegen.js"></script>
    <script>
      (function(){
        var input = document.getElementById('input');
        var output = document.getElementById('output');
        var tran = document.getElementById('tran');
        var run = document.getElementById('run');

        tran.onclick = function(){
          output.value = escodegen.generate(
            cps.transform(esprima.parse(input.value)));
        };

        run.onclick = function(){
          eval(output.value);
        };

      })();
    </script>
  </body>
</html>
